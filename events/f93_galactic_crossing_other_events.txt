namespace = f93_oe_event


# Triggers event when each country first sends a ship into the system (once per country)
# Scope = Ship
# From = System
# FromFrom = Country

#entering galactic crossing for the first time
ship_event = {
	id = f93_oe_event.1
	title = f93_oe_event.1.name
	desc = f93_oe_event.1.desc
	picture = GFX_evt_f93_galactic_crossing_map
	is_triggered_only = yes
	trigger = {
		FromFrom = { NOT = { has_country_flag = f93_seen_dandelion_relay } }
		FROM = { has_megastructure = dandelion_relay }
	}
	immediate = { FromFrom = { set_country_flag = f93_seen_dandelion_relay } }
	option = {
		name = f93_oe_event.1.a
	}

}

ship_event = {
	id = f93_oe_event.2
	title = f93_oe_event.2.name
	desc = f93_oe_event.2.desc
	picture = GFX_evt_astral_rift_vortex
	is_triggered_only = yes
	trigger = {
		owner = { NOT = { has_country_flag = f93_seen_shroud_region } }
		solar_system = {
			any_neighbor_system_euclidean = {
				has_star_flag = f93_shroud_region_flag
				distance =  {
					type = euclidean
					max_distance <= 80
				}
			}
		}
	}
	immediate = { owner = { set_country_flag = f93_seen_shroud_region } }
	option = {
		name = f93_oe_event.2.a
	}
}

country_event = {
	id = f93_oe_event.3
	title = f93_oe_event.3.name
	desc = f93_oe_event.3.desc
	picture = GFX_evt_skrand_ship
	is_triggered_only = yes
	trigger = {
		has_seen_any_bypass = ralisgate
		NOT = { has_country_flag = f93_seen_ralisgate_bypass }
	}
	immediate = { set_country_flag = f93_seen_ralisgate_bypass }
	option = {
		name = f93_oe_event.3.a
	}
}

planet_event = {
	id = f93_oe_event.4
	title = f93_oe_event.4.name
	desc = f93_oe_event.4.desc
	picture = GFX_evt_skrand_ship
	is_triggered_only = yes

	trigger = {
		solar_system = { any_system_megastructure = { is_megastructure_type = dandelion_relay } }
		space_owner = { NOT = { has_country_flag = f93_seen_galactic_crossing_mod } }
	}
	immediate = { owner = { set_country_flag = f93_seen_galactic_crossing_mod } }
	option = {
		name = f93_oe_event.4.a
		tooltip = {
			add_modifier = {
				modifier = f93_galactic_crossing_planet
			}
		}
		hidden_effect = {
			planet_event = {
				id = f93_oe_event.5
				days = 3600
			}
		}
	}
}

planet_event = {
	id = f93_oe_event.4001
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		solar_system = { any_system_megastructure = { is_megastructure_type = dandelion_relay } }
	}
	immediate = {
		add_modifier = {
			modifier = f93_galactic_crossing_planet
		}
	}
}

planet_event = {
	id = f93_oe_event.5
	title = f93_oe_event.5.name
	desc = f93_oe_event.5.desc
	picture = GFX_evt_obelisk_tourists
	is_triggered_only = yes
	option = {
		owner = {
			add_modifier = {
				modifier = f93_galactic_crossing_buff_diplomats
				mult = 0.5
			}
		}
	}
}


country_event = {
	id = f93_oe_event.6
	title = f93_oe_event.6.name
	desc = f93_oe_event.6.desc
	picture = GFX_evt_star_chart

	mean_time_to_happen = { days = 30 }

	trigger = {
		f93_system_is_connected_to_gal_crossing = yes
		NOT = { has_country_flag = f93_is_connected_to_gal_crossing_flag }
	}

	immediate = {
		set_country_flag = f93_is_connected_to_gal_crossing_flag
	}

	option = {
		name = f93_oe_event.6.a
		add_modifier = {
			modifier = f93_country_is_connected
		}
	}
}
country_event = {
	id = f93_oe_event.7
	title = f93_oe_event.7.name
	desc = f93_oe_event.7.name
	picture = GFX_evt_star_chart
	mean_time_to_happen = { days = 30 }

	trigger = {
		f93_system_is_connected_to_gal_crossing = no
		has_country_flag = f93_is_connected_to_gal_crossing_flag

	}

	immediate = {
		remove_country_flag = f93_is_connected_to_gal_crossing_flag
	}

	option = {
		name = f93_oe_event.7.a
		remove_modifier = f93_country_is_connected
	}
}
