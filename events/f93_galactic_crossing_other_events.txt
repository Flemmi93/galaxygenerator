namespace = f93_oe_event


# Triggers event when each country first sends a ship into the system (once per country)
# Scope = Ship
# From = System
# FromFrom = Country

#entering galactic crossing for the first time
country_event = {
	id = f93_oe_event.1
	title = f93_oe_event.1.name
	desc = f93_oe_event.1.desc
	picture = GFX_evt_f93_galactic_crossing_map
	mean_time_to_happen = 360
	trigger = {
		is_ai = no
		NOT = { has_country_flag = has_seen_f93_oe_event1 }
		# has_seen_any_bypass = relay_bypass
		any_system = {
			has_star_flag = f93_ancient_relay_system
			any_fleet_in_system = { owner = { is_same_value = root } }
		}
	}
	immediate = {
		set_country_flag = has_seen_f93_oe_event1
	}
	option = {
		name = f93_oe_event.1.a
	}
}

# Triggers event when each country first sends a ship into the system (once per country)
# Scope = Ship
# From = System
# FromFrom = Country
country_event = {
	id = f93_oe_event.2
	title = f93_oe_event.2.name
	desc = f93_oe_event.2.desc
	picture = GFX_evt_astral_rift_vortex
	mean_time_to_happen = 360
	trigger = {
		is_ai = no
		NOT = { has_country_flag = has_seen_f93_oe_event2 }
		any_system_within_border = {
			any_neighbor_system_euclidean = {
				has_star_flag = f93_shroud_region_flag
			}
		}
	}
	immediate = {
		set_country_flag = has_seen_f93_oe_event2
	}
	option = {
		name = f93_oe_event.2.a
	}
}

country_event = {
	id = f93_oe_event.3
	title = f93_oe_event.3.name
	desc = f93_oe_event.3.desc
	picture = GFX_evt_skrand_ship
	mean_time_to_happen = 360
	trigger = {
		is_ai = no
		any_system = {
			OR = {
				has_star_flag = f93_ralisgate
				has_star_flag = f93_raliscluster1
			}
			any_fleet_in_system = { owner = { is_same_value = root } }
		}
		NOT = { has_country_flag = f93_seen_ralisgate_bypass }
	}
	immediate = { set_country_flag = f93_seen_ralisgate_bypass }
	option = {
		name = f93_oe_event.3.a
	}
}

planet_event = {
	id = f93_oe_event.4
	title = f93_oe_event.4.name
	desc = f93_oe_event.4.desc
	picture = GFX_evt_skrand_ship
	mean_time_to_happen = 360

	trigger = {
		solar_system = { any_system_megastructure = { is_megastructure_type = dandelion_relay } }
		space_owner = { NOT = { has_country_flag = has_seen_f93_oe_event4 } }
	}
	immediate = { space_owner = { set_country_flag = has_seen_f93_oe_event4 } }
	option = {
		name = f93_oe_event.4.a
		tooltip = {
			add_modifier = {
				modifier = f93_galactic_crossing_planet
			}
		}
		hidden_effect = {
			planet_event = {
				id = f93_oe_event.5
				days = 3600
			}
		}
	}
}

planet_event = {
	id = f93_oe_event.4001
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		solar_system = { any_system_megastructure = { is_megastructure_type = dandelion_relay } }
		NOT = { has_modifier = f93_galactic_crossing_planet }
	}
	immediate = {
		add_modifier = {
			modifier = f93_galactic_crossing_planet
		}
	}
}

planet_event = {
	id = f93_oe_event.5
	title = f93_oe_event.5.name
	desc = f93_oe_event.5.desc
	picture = GFX_evt_obelisk_tourists
	is_triggered_only = yes
	option = {
		owner = {
			add_modifier = {
				modifier = f93_galactic_crossing_buff_diplomats
				mult = 0.5
			}
		}
	}
}


country_event = {
	id = f93_oe_event.6
	title = f93_oe_event.6.name
	desc = f93_oe_event.6.desc
	picture = GFX_evt_star_chart

	mean_time_to_happen = { days = 30 }

	trigger = {
		f93_system_is_connected_to_gal_crossing = yes
		NOT = { has_country_flag = f93_is_connected_to_gal_crossing_flag }
	}

	immediate = {
		set_country_flag = f93_is_connected_to_gal_crossing_flag
	}

	option = {
		name = f93_oe_event.6.a
		add_modifier = {
			modifier = f93_country_is_connected
		}
	}
}
country_event = {
	id = f93_oe_event.7
	title = f93_oe_event.7.name
	desc = f93_oe_event.7.name
	picture = GFX_evt_star_chart
	mean_time_to_happen = { days = 30 }

	trigger = {
		f93_system_is_connected_to_gal_crossing = no
		has_country_flag = f93_is_connected_to_gal_crossing_flag

	}

	immediate = {
		remove_country_flag = f93_is_connected_to_gal_crossing_flag
	}

	option = {
		name = f93_oe_event.7.a
		remove_modifier = f93_country_is_connected
	}
}
